import re
import regex
import nltk
from pyarabic import araby
from nltk.corpus import stopwords
from nltk.stem.isri import ISRIStemmer
import emoji

# Ensure you have downloaded the Arabic stop words
nltk.download('stopwords')

class ArabicTextPreprocessor:
    def __init__(self):
        self.emojis = {
                "ğŸ™‚":"Ø¶Ø­Ùƒ", "ğŸ¤£":"Ø¶Ø­Ùƒ", "ğŸ˜‚":"Ø¶Ø­Ùƒ", "ğŸ’”":"Ø­Ø²Ù†", "ğŸ™‚":"Ø¶Ø­Ùƒ", "â¤ï¸":"Ø­Ø¨", "â¤":"Ø­Ø¨", "ğŸ˜":"Ø­Ø¨", "ğŸ˜­":"Ø­Ø²Ù†", "ğŸ˜¢":"Ø­Ø²Ù†",
                "ğŸ˜”":"Ø­Ø²Ù†", "â™¥":"Ø­Ø¨", "ğŸ’œ":"Ø­Ø¨", "ğŸ˜…":"Ø¶Ø­Ùƒ", "ğŸ™":"Ø­Ø²Ù†", "ğŸ’•":"Ø­Ø¨", "ğŸ’™":"Ø­Ø¨", "ğŸ˜":"Ø­Ø²Ù†", "ğŸ˜Š":"ÙØ±Ø­", "ğŸ‘":"ÙŠØµÙÙ‚",
                "ğŸ‘Œ":"Ø§Ø­Ø³Ù†Øª", "ğŸ˜´":"Ù†ÙˆÙ…", "ğŸ˜€":"Ø¶Ø­Ùƒ", "ğŸ˜Œ":"Ø­Ø²Ù†", "ğŸŒ¹":"ÙˆØ±Ø¯Ø©", "ğŸ™ˆ":"Ø­Ø¨", "ğŸ˜„":"Ø¶Ø­Ùƒ", "ğŸ˜":"Ù…Ø­Ø§ÙŠØ¯", "âœŒ":"Ù…Ù†ØªØµØ±", "âœ¨":"Ù†Ø¬Ù…Ù‡",
                "ğŸ¤”":"ØªÙÙƒÙŠØ±", "ğŸ˜":"ÙŠØ³ØªÙ‡Ø²Ø¡", "ğŸ˜’":"ØºØ¶Ø¨", "ğŸ™„":"Ù…Ù„Ù„", "ğŸ˜•":"ØºØ¶Ø¨", "ğŸ˜ƒ":"Ø¶Ø­Ùƒ", "ğŸŒ¸":"ÙˆØ±Ø¯Ø©", "ğŸ˜“":"Ø­Ø²Ù†", "ğŸ’":"Ø­Ø¨", "ğŸ’—":"Ø­Ø¨",
                "ğŸ˜‘":"ØºØ¶Ø¨", "ğŸ’­":"ØªÙÙƒÙŠØ±", "ğŸ˜":"Ø«Ù‚Ø©", "ğŸ’›":"Ø­Ø¨", "ğŸ˜©":"Ø­Ø²Ù†", "ğŸ’ª":"Ø¹Ø¶Ù„Ø§Øª", "ğŸ‘":"Ù…ÙˆØ§ÙÙ‚", "ğŸ™ğŸ»":"Ø´ÙƒØ±", "ğŸ˜³":"Ù‚Ù„Ù‚", "ğŸ‘ğŸ¼":"ØªØµÙÙŠÙ‚",
                "ğŸ¶":"Ù…ÙˆØ³ÙŠÙ‚ÙŠ", "ğŸŒš":"ØµÙ…Øª", "ğŸ’š":"Ø­Ø¨", "ğŸ™":"Ø´ÙƒØ±", "ğŸ’˜":"Ø­Ø¨", "ğŸƒ":"Ø³Ù„Ø§Ù…", "â˜º":"Ø¶Ø­Ùƒ", "ğŸ¸":"Ø¶ÙØ¯Ø¹", "ğŸ˜¶":"Ù‚Ù„Ù‚", "âœ‹ğŸ»":"ØªÙˆÙ‚Ù",
                "ğŸ˜‰":"ÙØ±Ø­", "ğŸŒ·":"Ø­Ø¨", "ğŸ™ƒ":"ÙØ±Ø­", "ğŸ˜«":"Ø­Ø²Ù†", "ğŸ˜¨":"Ø®ÙˆÙ", "ğŸ¼ ":"Ù…ÙˆØ³ÙŠÙ‚ÙŠ", "ğŸ":"Ù…Ø±Ø­", "ğŸ‚":"Ù…Ø±Ø­", "ğŸ’Ÿ":"Ø­Ø¨", "ğŸ˜ª":"Ø­Ø²Ù†",
                "ğŸ˜†":"Ø¶Ø­Ùƒ", "ğŸ˜£":"ØºØ¶Ø¨", "â˜ºï¸":"Ø­Ø¨", "ğŸ˜±":"Ø®ÙˆÙ", "ğŸ˜":"Ø¶Ø­Ùƒ", "ğŸ˜–":"Ø§Ø³ØªÙŠØ§Ø¡", "ğŸƒğŸ¼":"ÙŠØ¬Ø±ÙŠ", "ğŸ˜¡":"ØºØ¶Ø¨", "ğŸš¶":"ÙŠØ³ÙŠØ±", "ğŸ¤•":"Ù…Ø±Ø¶",
                "â€¼ï¸":"ØªØ¹Ø¬Ø¨", "ğŸ•Š":"Ø·Ø§Ø¦Ø±", "ğŸ‘ŒğŸ»":"Ø§Ø­Ø³Ù†Øª", "â£":"Ø­Ø¨", "ğŸ™Š":"Ù…ØµØ¯ÙˆÙ…", "ğŸ’ƒ":"Ù…Ø±Ø­", "ğŸ’ƒğŸ¼":"Ù…Ø±Ø­", "ğŸ˜œ":"Ù…Ø±Ø­", "ğŸ‘Š":"Ø¶Ø±Ø¨Ø©", "ğŸ˜Ÿ":"Ø§Ø³ØªÙŠØ§Ø¡",
                "ğŸ’–":"Ø­Ø¨", "ğŸ˜¥":"Ø­Ø²Ù†", "ğŸ»":"Ù…ÙˆØ³ÙŠÙ‚ÙŠ", "âœ’":"ÙŠÙƒØªØ¨", "ğŸš¶ğŸ»":"ÙŠØ³ÙŠØ±", "ğŸ’":"Ø§Ù„Ù…Ø§Ø³", "ğŸ˜·":"Ù…Ø±Ø¶", "â˜":"ÙˆØ§Ø­Ø¯", "ğŸš¬":"ØªØ¯Ø®ÙŠÙ†",
                "ğŸ’" : "ÙˆØ±Ø¯", "ğŸŒ" : "Ø´Ù…Ø³", "ğŸ‘†" : "Ø§Ù„Ø§ÙˆÙ„", "âš ï¸" :"ØªØ­Ø°ÙŠØ±", "ğŸ¤—" : "Ø§Ø­ØªÙˆØ§Ø¡", "âœ–ï¸": "ØºÙ„Ø·", "ğŸ“"  : "Ù…ÙƒØ§Ù†", "ğŸ‘¸" : "Ù…Ù„ÙƒÙ‡",
                "ğŸ‘‘" : "ØªØ§Ø¬", "âœ”ï¸" : "ØµØ­", "ğŸ’Œ": "Ù‚Ù„Ø¨", "ğŸ˜²" : "Ù…Ù†Ø¯Ù‡Ø´", "ğŸ’¦": "Ù…Ø§Ø¡", "ğŸš«" : "Ø®Ø·Ø§", "ğŸ‘ğŸ»" : "Ù…Ù…ØªØ§Ø²", "ğŸŠ" :"ÙŠØ³Ø¨Ø­", "ğŸ‘ğŸ»": "ØªÙ…Ø§Ù…",
                "â­•ï¸" :"Ø¯Ø§Ø¦Ø±Ù‡", "ğŸ·" : "Ù…ÙˆØ³ÙŠÙ‚ÙŠ", "ğŸ‘‹": "ØªÙ„ÙˆÙŠØ­ Ø¨Ø§Ù„ÙŠØ¯", "âœŒğŸ¼": "Ø¹Ù„Ø§Ù…Ù‡ Ø§Ù„Ù†ØµØ±", "ğŸŒ":"Ø¶Ø­Ùƒ", "â¿"  : "Ø¹Ù‚Ø¯Ù‡ Ù…Ø²Ø¯ÙˆØ¬Ù‡", "ğŸ’ªğŸ¼" : "Ù‚ÙˆÙŠ",
                "ğŸ“©":  "ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ", "â˜•ï¸": "Ù‚Ù‡ÙˆÙ‡", "ğŸ˜§" : "ØºØ¶Ø¨", "ğŸ—¨": "Ø±Ø³Ø§Ù„Ø©", "â—ï¸" :"ØªØ¹Ø¬Ø¨", "ğŸ™†ğŸ»": "Ø§Ø´Ø§Ø±Ù‡ Ù…ÙˆØ§ÙÙ‚Ù‡", "ğŸ‘¯" :"Ø§Ø®ÙˆØ§Øª", "Â©" :  "Ø±Ù…Ø²",
                "ğŸ‘µğŸ½" :"Ø³ÙŠØ¯Ù‡ Ø¹Ø¬ÙˆØ²Ù‡", "ğŸ£": "ÙƒØªÙƒÙˆØª", "ğŸ™Œ": "ØªØ´Ø¬ÙŠØ¹", "ğŸ™‡": "Ø´Ø®Øµ ÙŠÙ†Ø­Ù†ÙŠ", "ğŸ‘ğŸ½":"Ø§ÙŠØ¯ÙŠ Ù…ÙØªÙˆØ­Ù‡", "ğŸ‘ŒğŸ½": "Ø¨Ø§Ù„Ø¸Ø¨Ø·", "â‰ï¸" : "Ø§Ø³ØªÙ†ÙƒØ§Ø±",
                "âš½ï¸": "ÙƒÙˆØ±Ù‡", "ğŸ•¶" :"Ø­Ø¨", "ğŸˆ" :"Ø¨Ø§Ù„ÙˆÙ†", "ğŸ€": "ÙˆØ±Ø¯Ù‡", "ğŸ’µ":  "ÙÙ„ÙˆØ³", "ğŸ˜‹":  "ÙØ±Ø­", "ğŸ˜›":  "ÙØ±Ø­", "ğŸ˜ ":  "ØºØ¶Ø¨", "âœğŸ»":  "ÙŠÙƒØªØ¨",
                "ğŸŒ¾":  "Ø§Ø±Ø²", "ğŸ‘£":  "Ø§Ø«Ø± Ù‚Ø¯Ù…ÙŠÙ†", "âŒ":"Ø±ÙØ¶", "ğŸŸ":"Ø·Ø¹Ø§Ù…", "ğŸ‘¬":"ØµØ¯Ø§Ù‚Ø©", "ğŸ°":"Ø§Ø±Ù†Ø¨", "â˜‚":"Ù…Ø·Ø±", "âšœ":"Ù…Ù…Ù„ÙƒØ© ÙØ±Ù†Ø³Ø§", "ğŸ‘":"Ø®Ø±ÙˆÙ",
                "ğŸ—£":"ØµÙˆØª Ù…Ø±ØªÙØ¹", "ğŸ‘ŒğŸ¼":"Ø§Ø­Ø³Ù†Øª", "â˜˜":"Ù…Ø±Ø­", "ğŸ˜®":"Ø®ÙˆÙ", "ğŸ˜¦":"Ø®ÙˆÙ", "â­•":"Ø§Ù„Ø­Ù‚", "âœï¸":"Ù‚Ù„Ù…", "â„¹":"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª", "ğŸ™ğŸ»":"Ø±ÙØ¶", "âšªï¸":"Ù†Ø¶Ø§Ø±Ø© Ù†Ù‚Ø§Ø¡",
                "ğŸ¤":"Ø­Ø²Ù†", "ğŸ’«":"Ù…Ø±Ø­", "ğŸ’":"Ø­Ø¨", "ğŸ”":"Ø·Ø¹Ø§Ù…", "â¤ï¸":"Ø­Ø¨", "âœˆï¸":"Ø³ÙØ±", "ğŸƒğŸ»â€â™€ï¸":"ÙŠØ³ÙŠØ±", "ğŸ³":"Ø°ÙƒØ±", "ğŸ¤":"Ù…Ø§ÙŠÙƒ ØºÙ†Ø§Ø¡", "ğŸ¾":"ÙƒØ±Ù‡", "ğŸ”":"Ø¯Ø¬Ø§Ø¬Ø©",
                "ğŸ™‹":"Ø³Ø¤Ø§Ù„", "ğŸ“®":"Ø¨Ø­Ø±", "ğŸ’‰":"Ø¯ÙˆØ§Ø¡", "ğŸ™ğŸ¼":"Ø´ÙƒØ±", "ğŸ’‚ğŸ¿ ":"Ø­Ø§Ø±Ø³", "ğŸ¬":"Ø³ÙŠÙ†Ù…Ø§", "â™¦ï¸":"Ù…Ø±Ø­", "ğŸ’¡":"Ù‚ÙƒØ±Ø©", "â€¼":"ØªØ¹Ø¬Ø¨", "ğŸ‘¼":"Ø·ÙÙ„", "ğŸ”‘":"Ù…ÙØªØ§Ø­",
                "â™¥ï¸":"Ø­Ø¨", "ğŸ•‹":"ÙƒØ¹Ø¨Ø©", "ğŸ“":"Ø¯Ø¬Ø§Ø¬Ø©", "ğŸ’©":"Ù…Ø¹ØªØ±Ø¶", "ğŸ‘½":"ÙØ¶Ø§Ø¦ÙŠ", "â˜”ï¸":"Ù…Ø·Ø±", "ğŸ·":"Ø¹ØµÙŠØ±", "ğŸŒŸ":"Ù†Ø¬Ù…Ø©", "â˜ï¸":"Ø³Ø­Ø¨", "ğŸ‘ƒ":"Ù…Ø¹ØªØ±Ø¶", "ğŸŒº":"Ù…Ø±Ø­",
                "ğŸ”ª":"Ø³ÙƒÙŠÙ†Ø©", "â™¨":"Ø³Ø®ÙˆÙ†ÙŠØ©", "ğŸ‘ŠğŸ¼":"Ø¶Ø±Ø¨", "âœ":"Ù‚Ù„Ù…", "ğŸš¶ğŸ¾â€â™€ï¸":"ÙŠØ³ÙŠØ±", "ğŸ‘Š":"Ø¶Ø±Ø¨", "ğŸ˜š":"Ø­Ø¨", "ğŸ”¸":"Ù…Ø±Ø­", "ğŸ‘ğŸ»":"Ù„Ø§ ÙŠØ¹Ø¬Ø¨Ù†ÙŠ", "ğŸ‘ŠğŸ½":"Ø¶Ø±Ø¨Ø©", "ğŸ˜™":"Ø­Ø¨",
                "ğŸ¥":"ØªØµÙˆÙŠØ±", "ğŸ‘‰":"Ø¬Ø°Ø¨ Ø§Ù†ØªØ¨Ø§Ù‡", "ğŸ‘ğŸ½":"ÙŠØµÙÙ‚", "ğŸ’ªğŸ»":"Ø¹Ø¶Ù„Ø§Øª", "ğŸ´":"Ø§Ø³ÙˆØ¯", "ğŸ”¥":"Ø­Ø±ÙŠÙ‚", "ğŸ˜¬":"Ø®ÙˆÙ", "ğŸ‘ŠğŸ¿":"ÙŠØ¶Ø±Ø¨", "ğŸŒ¿":"ÙˆØ±Ù‚Ù‡ Ø´Ø¬Ø±Ù‡", "âœ‹ğŸ¼":"ÙƒÙ Ø§ÙŠØ¯",    
                "ğŸ‘":"Ø§ÙŠØ¯ÙŠ Ù…ÙØªÙˆØ­Ù‡", "â˜ ï¸":"Ø±Ø¹Ø¨", "ğŸ‰":"ÙŠÙ‡Ù†Ø¦", "ğŸ”•" :"ØµØ§Ù…Øª", "ğŸ˜¿":"Ø­Ø²Ù†", "â˜¹ï¸":"Ø­Ø²Ù†", "ğŸ˜˜" :"Ø­Ø¨", "ğŸ˜°" :"Ø®ÙˆÙ Ùˆ Ø­Ø²Ù†", "ğŸŒ¼":"ÙˆØ±Ø¯Ù‡", "ğŸ’‹":"Ø¨ÙˆØ³Ù‡",
                "ğŸ‘‡":"Ù„Ø§Ø³ÙÙ„", "â£ï¸":"Ø­Ø¨", "ğŸ§":"Ø³Ù…Ø§Ø¹Ø§Øª", "ğŸ“":"ÙŠÙƒØªØ¨", "ğŸ˜‡":"Ø³Ø¹ÙŠØ¯", "ğŸ˜ˆ":"Ø±Ø¹Ø¨", "ğŸƒ":"ÙŠØ¬Ø±ÙŠ", "âœŒğŸ»":"Ø¹Ù„Ø§Ù…Ù‡ Ø§Ù„Ù†ØµØ±", "ğŸ”«":"ÙŠØ¶Ø±Ø¨", "â—ï¸":"ØªØ¹Ø¬Ø¨",
                "ğŸ‘":"ØºÙŠØ± Ù…ÙˆØ§ÙÙ‚", "ğŸ”":"Ù‚ÙÙ„", "ğŸ‘ˆ":"Ù„Ù„ÙŠÙ…ÙŠÙ†", "â„¢":"Ø±Ù…Ø²", "ğŸš¶ğŸ½":"ÙŠØªÙ…Ø´ÙŠ", "ğŸ˜¯":"Ù…ØªÙØ§Ø¬Ø£", "âœŠ":"ÙŠØ¯ Ù…ØºÙ„Ù‚Ù‡", "ğŸ˜»":"Ø§Ø¹Ø¬Ø§Ø¨", "ğŸ™‰" :"Ù‚Ø±Ø¯", "ğŸ‘§":"Ø·ÙÙ„Ù‡",     
                "ğŸ”´":"Ø¯Ø§Ø¦Ø±Ù‡ Ø­Ù…Ø±Ø§Ø¡", "ğŸ’ªğŸ½":"Ù‚ÙˆÙ‡", "ğŸ’¤":"Ù†ÙˆÙ…", "ğŸ‘€":"Ø­ÙŠØ±Ù‡", "âœğŸ»":"ÙŠÙƒØªØ¨", "â„ï¸":"ØªÙ„Ø¬", "ğŸ’€":"Ø±Ø¹Ø¨", "ğŸ˜¤":"ØºØ¶Ø¨", "ğŸ–‹":"Ù‚Ù„Ù…", "ğŸ©":"ÙƒØ§Ø¨", "â˜•ï¸":"Ù‚Ù‡ÙˆÙ‡",     
                "ğŸ˜¹":"Ø¶Ø­Ùƒ", "ğŸ’“":"Ø­Ø¨", "â˜„ï¸ ":"Ù†Ø§Ø±", "ğŸ‘»":"Ø±Ø¹Ø¨", "ğŸ¤®":"Ù…Ù‚Ø±Ù", "ğŸ¤¢":"Ù…Ù‚Ø±Ù", "ğŸ¤ª":"Ù…Ø±Ø­", "ğŸ¥´":"ØªØ¹Ø¨", "ğŸ¤§":"Ù…Ø±Ø¶", "ğŸ¤’":"Ù…Ø±Ø¶", "ğŸ¤•":"Ù…Ø±Ø¶", "ğŸ¤‘":"Ù…Ø±Ø­",
                "ğŸ¤":"ØµÙ…Øª", "ğŸ¤«":"ØµÙ…Øª", "ğŸ¤­":"Ø¶Ø­Ùƒ", "ğŸ§":"ØªÙÙƒÙŠØ±", "ğŸ¤“":"Ø°ÙƒØ§Ø¡", "ğŸ¤©":"Ù…Ø±Ø­", "ğŸ¥³":"Ù…Ø±Ø­", "ğŸ¥º":"Ø­Ø²Ù†", "ğŸ¤¥":"ÙƒØ°Ø¨", "ğŸ¤”":"ØªÙÙƒÙŠØ±", "ğŸ¤—":"Ù…Ø±Ø­", "ğŸ¥°":"Ù…Ø±Ø­",
                "ğŸ¤":"Ø­Ø¨", "ğŸ¤²":"Ø¯Ø¹Ø§Ø¡", "ó¾Œ´":"", "ğŸ¤¦":"Ø§Ù„Ù…", "ğŸ¤·â€":"Ù‚Ù„Ù‚", "ğŸ¤š":"ÙŠØ¯", "ğŸ¦‹":"Ù…Ø±Ø­", "ğŸ¥‡":"ÙÙˆØ²",
        }

        self.emoticons = {
            ":))": "Ø¶Ø­Ùƒ", "((:": "Ø¶Ø­Ùƒ", ":)": "Ø¶Ø­Ùƒ", "(:": "Ø¶Ø­Ùƒ",
            ":(": "Ø­Ø²Ù†", "):": "Ø­Ø²Ù†", "xD": "Ø¶Ø­Ùƒ", "XD": "Ø¶Ø­Ùƒ",
            ":=(": "ÙŠØ¨ÙƒÙŠ", ":'(": "Ø­Ø²Ù†", ":'â€‘(": "Ø­Ø²Ù†", "XD" : "Ø¶Ø­Ùƒ",
            ":D" : "Ø¶Ø­Ùƒ", "â™¬" : "Ù…ÙˆØ³ÙŠÙ‚ÙŠ", "â™¡" : "Ø­Ø¨", "â˜»"  : "Ø¶Ø­Ùƒ",
        }

        
        self.negation_words = [
            "Ù„Ø³Øª","Ù…Ø¨","ØºÙŠØ±", "Ù„ÙŠØ³", "Ø³ÙˆÙ‰", "Ù„Ù…", "Ù„Ù†", "Ù…Ø§", "Ù„Ø§", "Ø¨Ù„Ø§", "Ø¨Ø¯ÙˆÙ†", "Ø¹ÙŠØ±", "Ø¹Ø¯Ø§", "ÙƒÙ„Ø§"
        ]
    
        self.stemmer = ISRIStemmer()

    def preprocess_text(self, text):
        text = self.replace_emojis_with_text(text)
        text = self.replace_emoticons_with_text(text)
        text = self.remove_stop_words(text)
        text = self.remove_urls(text)
        text = self.remove_non_arabic(text)
        text = self.remove_numbers(text)
        text = self.normalize_arabic(text)
        text = self.remove_punctuations(text)
        text = self.lemmatize_arabic(text)
        return text

    def remove_stop_words(self, text):
        arabic_stopwords = set(stopwords.words('arabic'))
        # Exclude negation words from the stop words list
        stopwords_to_remove = [word for word in arabic_stopwords if word not in self.negation_words]
        return " ".join([word for word in text.split() if word not in stopwords_to_remove])


    def lemmatize_arabic(self, text):
        return " ".join([self.stemmer.stem(word) for word in text.split()])

    def normalize_arabic(self, text):
        text = text.strip()
        text = re.sub("Ù‰", "ÙŠ", text)
        text = re.sub("Ø¤", "Ø¡", text)
        text = re.sub("Ø¦", "Ø¡", text)
        text = re.sub("Ø©", "Ù‡", text)
        
        #remove repetetions
        text = re.sub("[Ø¥Ø£Ù±Ø¢Ø§]", "Ø§", text)
        text = text.replace('ÙˆÙˆ', 'Ùˆ')
        text = text.replace('ÙŠÙŠ', 'ÙŠ')
        text = text.replace('ÙŠÙŠÙŠ', 'ÙŠ')
        text = text.replace('Ø§Ø§', 'Ø§')

        #Remove extra whitespace
        text = re.sub('\s+', ' ', text)
        
        #Remove longation
        text = re.sub(r'(.)\1+', r"\1\1", text) 
        
        #Strip vowels from a text, include Shadda.
        text = araby.strip_tashkeel(text)
        
        #Strip diacritics from a text, include harakats and small lettres The striped marks are
        text = araby.strip_diacritics(text)
        text=''.join([i for i in text if not i.isdigit()])
        return text

    def remove_non_arabic(self, text):
        return re.sub('[A-Za-z]+', ' ', text)

    def remove_numbers(self, text):
        return ''.join([i for i in text if not i.isdigit()])

    def remove_punctuations(self, text):
        # Remove punctuations
        text = re.sub('[%s]' % re.escape("""!"#$%&'()*+,ØŒ-./:;<=>ØŸ?@[\]^_`{|}~"0123456789\\A-Za-zâ€¢â€”"""), ' ', text)
        text = text.replace('Ø›',"", )

        # Remove extra whitespace
        text = re.sub('\s+', ' ', text)
        text =  " ".join(text.split())
        return text.strip()

    def remove_urls(self, text):
        url_pattern = re.compile(r'https?://\S+|www\.\S+')
        return url_pattern.sub(r'', text)

    def replace_emojis_with_text(self, text):
        translated_text = ""
        for char in text:
            if any(emoji.distinct_emoji_list(char) for char in char):
                translated_text += " " + self.emojis.get(char, char) + " "
            else:
                translated_text += self.emojis.get(char, char)
        return translated_text

    def replace_emoticons_with_text(self, text):
        translated_text = ""
        seperarate_word = text.split(' ')
        for word in seperarate_word:
            translated_text += self.emoticons.get(word, word) + " "
        return translated_text
